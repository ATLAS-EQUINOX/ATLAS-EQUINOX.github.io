<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title> Î›TLÎ›S | ÎžQUINOXâ„¢ </title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Custom Styles -->
  <link href="./css/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

  <div id="mobile-blocker">
    <div class="mobile-blocker-content">
      <h2>ðŸš« Unsupported Screen Size</h2>
      <p>This game is best experienced on larger screens. Please use a tablet or desktop device.</p>
    </div>
  </div>
  

  <div id="loadingOverlay">
    <div class="loading-content">
      <output class="spinner-border text-info mb-3" name="warpStatus"></output>
      <div class="nav-logo resource-name"><strong>Î›TLÎ›S | ÎžQUINOXâ„¢</strong><br><small>An Interstellar Trading Company</small> </div>
      <button type="button" class="btn btn-danager" onclick="resetGameState()">Emergency Save Reset</button>

    </div>
  </div>

  <nav class="top-nav d-flex justify-content-between align-items-center p-2">
    <div class="d-flex align-items-center gap-3">
      <img src="./images/white.png" alt="ATLAS Logo" id="logoImage" style="height: 60px;" />
      <div class="nav-logo">
        <strong>Î›TLÎ›S | ÎžQUINOXâ„¢</strong><br>
        <small>An Interstellar Trading Company</small>
      </div>
    </div>
  
    <div class="nav-links">


      
      <button id="openLeaderboardBtn"><i class="fa fa-trophy"></i> | NPC Leaderboard</button>
      <div class="nav-separator"></div>
      <button id="openHelpBtn"><i class="fa fa-question-circle" aria-hidden="true"></i> | Help</button>
      <div class="nav-separator"></div>
      

      <button onclick="saveGameState(logToConsole = true)"><i class="fa fa-save"></i> | Save Game</button>
      <button onclick="resetGameState()"><i class="fa fa-trash-o"></i> | Reset Save</button>
      <div class="nav-separator"></div>
      <button id="openDevLogBtn"><i class="fa fa-code" aria-hidden="true"></i> | Development</button>

    </div>
  </nav>
  



  <!-- Warp Overlay -->
  <div id="warp-overlay" class="warp-overlay d-none">
    <div class="warp-content text-center">
      <output class="spinner-border text-info mb-3" name="warpStatus"></output>
      <h3>WARP IN PROGRESS...</h3>
      <p id="warp-route" class="small text-light mb-1">Sol to Alpha Centauri (Step X of Y)</p>

      <!-- ðŸŸ¡ Progress Bar -->
      <div class="progress mt-2" style="height: 20px;">
        <div id="warp-progress-bar" class="progress-bar bg-warning progress-bar-striped progress-bar-animated"
          role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
          0%
        </div>
      </div>
      <button id="abortWarpBtn" class="btn btn-warning mt-3">
        âœ– | Abort Warp
      </button>
    </div>
  </div>



  <!-- Enhanced Leaderboard Modal -->
  <div id="leaderboardModal" class="modal">
    <div class="modal-content">
      <span id="closeLeaderboardBtn" class="close">&times;</span>
      <h2></i>Leaderboard</h2>
      <div class="leaderboard-scroll-container">
        <table id="leaderboardTable" class="table table-dark table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Corporation:</th>
              <th>Net Worth (Credits + Stock):</th>
              <th>Credits:</th>
              <th>Stock Value:</th>
            </tr>
          </thead>
          <tbody id="leaderboardBody"></tbody>
        </table>
      </div>
    </div>
  </div>

<div id="HelpModal" class="modal" style="display: none;">
  <div class="modal-content large-modal">
    <span id="closeHelpBtn" class="close">&times;</span>

    <h3>Î›TLÎ›S | ÎžQUINOXâ„¢</h3>

    <!-- Welcome Section -->
    <section id="helpSection">
      <p>Welcome to Î›Îž, Intern-324234231.</p>
      <p>
        You are a disposable yet vital cog in Î›Îžâ€™s ever-churning interstellar profit engine. As part of your
        mandatory-voluntary contract, you will source volatile resources, authorize ethically interpretive trades, and
        exploit market collapses across economically impoverished systems.
      </p>
      <p>
        To get you started, Î›Îž have generously provided you with
        <strong><span class="text-success">100á¶œ</span></strong> to start off with â€“ Please note any and all profits generated from this
        starting credit are legally, spiritually, and metaphysically the property of Î›TLÎ›S | ÎžQUINOXâ„¢. In return, you
        may earn radiation sickness capsules and hydration credits
        (<span class="text-warning"><i>*pending managerial approval â€“ which may be reasonably withheld</i></span>). Every resource is a unit. Every decision is a liability. Every failure is documented, analyzed, repackaged, and
        sold as a consultancy insight.
      </p>
      <hr>

      <h4>Basic Gameplay</h4>
      <ul>
        <li><strong>Buy Resources:</strong> Use the Buy panel to purchase materials from the selected system. Prices are dynamic and based on supply and demand.</li>
        <li><strong>Sell Resources:</strong> Sell goods from your inventory at systems offering favorable prices. Export taxes may apply.</li>
        <li><strong>Storage:</strong> You can transfer materials to your Vault (with a 30-second transit time).</li>
        <li><strong>Travel:</strong> Warp between systems to find the best trade opportunities. Fuel costs and travel times apply.</li>
      </ul>

      <h4>Logistics & Inventory</h4>
      <ul>
        <li><strong>Incoming Shipments:</strong> Purchased resources arrive after a short delay. Monitor their ETA in the Logistics tab.</li>
        <li><strong>Vault:</strong> Long-term storage for overflow materials. Accessible via the Logistics tab.</li>
        <li><strong>Contracts:</strong> Earn bonus credits by accepting time-sensitive delivery missions in the Contracts tab.</li>
      </ul>

      <h4>Market Mechanics</h4>
      <ul>
        <li>Prices fluctuate based on recent trades, scarcity, and supply/demand levels.</li>
        <li>Each system specializes in certain resources, which affects pricing and availability.</li>
        <li>NPC corporations also trade, influencing the market with their own strategies.</li>
      </ul>
      <hr>
      <h4>About Î›Îžâ„¢</h4>
      
      <p>
        Born in the fiscal black hole of late-stage capitalism, Î›TLÎ›S | ÎžQUINOXâ„¢ was formed from the hostile merger of
        two economic behemoths: Î›TLÎ›S Logistics, the galaxyâ€™s most aggressive supply chain megacorp (specializing in
        efficiency and moral flexibility), and ÎžQUINOX Holdings, a shadowy megafund known for asset acquisition, time
        manipulation, and occasionally purchasing entire quadrants.
      </p>
      <p>
        The merger baffled regulators, terrified investors, and incidentally destabilized the three moons of
        Tai-Ceti-5.
      </p>
      <p>
        The result? A single hypercapitalist juggernaut whose quarterly profits outpace some galactic GDPs and whose
        market brokers (like you, Intern-324234231!) are mostly still unpaid interns.
      </p>
      <hr>
    </section>
    <p class="text-muted small">
      <span class="text-danger"><i>By using this terminal, you agree to the Î›TLÎ›S | ÎžQUINOXâ„¢ End-User License
          Agreement (pages.413â€“3405, p.654 SC.435.5.A) which you definitely read, understood, and internalized
          spiritually.</i></span>
    </p>
      
    </section>
  </div>
</div>






  <!-- Main Layout -->
  <div class="main-layout d-flex flex-row">

    <!-- Sidebar Section -->
    <aside class="sidebar p-3">

      <section class="console-wrapper2 mb-3">
        <small>
          <b>Credits:</b> <span id="credits">~</span>á¶œ<br>
          <b>Fuel:</b> <span id="fuel">~</span>áµ£ / 1000áµ£<br>

          <b>Inventory:</b> <span  id="inventoryCount">~</span>áµ£</text><br>
         <b>Î›Îž Vault:</b> <span  id="vaultCount">~</span>áµ£</text><br>

        </small>
      </section>



      <section class="console-wrapper2 mb-3 overflow: hidden;">

        <small><label class="form-label"><text class="highlight">Warp: </text></label></small>
        <select id="travelSearch" class="form-select mb-2">
        </select>
        <button id="travelButton" class="btn btn-outline-warning w-100" onclick="travel()">Warp</button>
        <button id="refuelButton" class="btn btn-outline-warning w-100 mb-3" onclick="refuel()">Refuel</button>
      </section>


      <section class="console-wrapper2 mb-3">

        <small><label class="form-label"><text class="highlight">Trade Resource: </text></label></small>
        <select id="tradeResourceSelect" class="form-select mb-2"></select>
      
        <input type="number" id="tradeAmount" maxlength="3" min="1" class="form-control mb-2" value="5" placeholder="Amount" />
        <small><text> ~</text><span id="buybreakdown">~</span><span style="font-size: 0.55rem; color: #dc3545;">  (Tax-Excluded)</span></small><br>
        <span id="sellbreakdown" style="display: none;">~</span>
      
        <div class="d-flex gap-2">
          <button class="btn btn-success w-50" onclick="buyMaterial()">Buy</button>
          <button class="btn btn-danger w-50" onclick="sellMaterial()">Sell</button>
        </div>
      </section>

      <text style="color: #ffc107;">Game Last Saved: </text><br><div id="saveStatus" class="greyed-out">Loading...</div>
      





    </aside>

    <!-- Main Content Section -->

    <main class="main-and-console flex-grow-1 p-3">
      <section class="console-wrapper23 mb-3">

        <div class="market-wrapper d-flex flex-column flex-grow-1">

          <!-- Market Overview Header -->


          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="mb-0">Current System: <span id="location2" class="resource-name">~</span></h5>




            <div id="viewModeButtons">
              <button id="openTariffBtn" class="btn btn-outline-secondary">View Tax Rates</button>



              <button id="toggleMarketView" class="btn btn-outline-secondary"><i class="fa fa-toggle-on"
                  aria-hidden="true"></i>
                | Show Only Current System</button>


            </div>



          </div>




          <!-- Market Tables -->
          <div id="market-container" class="flex-grow-1">

            <table id="marketHeadingTable" class="table table-dark table-sm text-center"></table>
            <table id="spreadTable" class="table table-dark table-sm text-center"></table>

            <div id="market-scroll-wrapper">
              <table id="marketTable" class="table table-dark table-sm text-center market-main-table"></table>
            </div>

          </div>

          <div style="margin-top: 0.85rem; display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem;">
            <div>
              <text style="color: #ffc107;">â­“</text>
              <span class="text-muted small">| System specializes in this resource .</span>
            </div>
            <div>
              <span style="color: #ffffff;"class="glitch-effect" data-text="">âˆ…</span>
              <span class="text-muted small">| Market data degrades over distance, expect some inaccuracies from further away systems.</span>
            </div>
          </div>
          

       

      </section>


      <div class="log-row d-flex gap-3 mt-2">
        <div class="console-wrapper2 flex-fill log-box-container">
          <h5>Terminal:</h5>
          <div id="console" class="log-box"></div>
        </div>

        <div class="console-wrapper2 flex-fill log-box-container">
          <h5>Market Activity:</h5>
          <div id="marketLog" class="log-box"></div>
        </div>
      </div>

    </main>

    <aside class="inventory-panel p-3">
      <!-- Tab Navigation -->
      <ul class="nav nav-tabs" id="logisticsTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="logistics-tab" data-bs-toggle="tab" data-bs-target="#logistics"
            type="button" role="tab">Logistics</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="contracts-tab" data-bs-toggle="tab" data-bs-target="#contracts" type="button"
            role="tab">Contracts</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link disabled" id="Investments-tab" data-bs-toggle="tab" data-bs-target="#Investments"
            type="button" role="tab" disabled>+</button>
        </li>
        

      </ul>

      <!-- Tab Content -->
      <div class="tab-content" id="logisticsTabContent">
        <!-- Logistics Tab -->
        <div class="tab-pane fade show active" id="logistics" role="tabpanel">
          <section class="console-wrapper flex-fill">
            <h5 id="shipmentsTitle">Incoming Shipments:</h5>
            <ul id="shipments" class="shipment-list list-unstyled small"></ul>
          </section>
          <br>
          <section class="console-wrapper flex-fill">
            <h5>Inventory: <span class="expandable" onclick="togglePanel('sidebarInventoryContent')">â–²â–¼ | Open</span>
            </h5>
            <div id="sidebarInventoryContent" class="sidebar-inventory">
              <div id="inventoryItemsContainer"></div>
              <button id="sellAllButton" class="btn btn-danger w-100" onclick="sellAllMaterials()">Sell
                Inventory</button>
            </div>
          </section>
          <br>
          <section class="console-wrapper flex-fill">
            <h5>Î›Îž Vault: <span class="expandable" onclick="togglePanel('vaultInventoryContent')">â–²â–¼ | Open</span>
            </h5>
            <div id="vaultInventoryContent" class="sidebar-inventory" style="display: block;"></div>
          </section>
        </div>

        <!-- Contracts Tab -->
        <div class="tab-pane fade" id="contracts" role="tabpanel">
          <section class="console-wrapper flex-fill">
            <h6>Active Contracts:</h6>
            <div id="activeContractsContainer" class="d-flex flex-column gap-2 mb-3"></div>
          </section>

          <section class="console-wrapper flex-fill">
            <h6>Available Contracts:</h6>
            <div id="contractsContainer" class="d-flex flex-column gap-2"></div>
          </section>
        </div>


        <div class="tab-pane fade" id="Investments" role="tabpanel">
          <section class="console-wrapper flex-fill">
        </div>


      </div>
    </aside>
  </div>


  <div id="tariffModal" class="modal" style="display: none;">
    <div class="modal-content tariff-scroll-modal">
      <span id="closeTariffBtn" class="close">&times;</span>
      <h2></i>Tax Rates</h2>
      <table class="table table-sm table-dark table-bordered">
        <thead>
          <tr>
            <th>System</th>
            <th>Buy</th>
            <th>Sell</th>
          </tr>
        </thead>
        <tbody id="tariffTableBody"></tbody>
      </table>
    </div>
  </div>

  <div id="devLogModal" class="modal2warp" style="display: none;">
    <div class="modal-content galactic-style" style="width: 400px;">
      <span id="closeDevLogBtn" class="close">&times;</span>
      <h5>Hi</h5>
      <p>
        Thanks for checking out the game!
        <hr>
        This is a passion project I work on in spare moments â€” not a full-time thing, just something I tinker with for fun. If you run into any bugs, have feedback or feature suggestions feel free to reach out on Discord: <strong>@m6344</strong>
      </p>
      Game Last Updated: <span class="greyed-out" id="last-updated">Loading...</span></h>
    </div>
  </div>
  
  

  <div id="warpModal" class="modal2warp">
    <div class="modal-content galactic-style width:400px">
      <span class="close" onclick="closeWarpModal()">&times;</span>
      <h4>Route Confirmation</h4>

      <div class="warp-route-text">
        <h4>
          <p><strong></strong> <span id="warpRouteDisplay"></span></p>
        </h4>
        <p><strong>Path:</strong> <span id="warpFullPath"></span></p>
        <p><strong>Jumps:</strong> <span id="warpHopCount"></span></p>
        <p><strong>~Fuel Consumption: </strong> <span id="warpFuelEstimate"></span>áµ£</p>
      </div>
      <hr>

      <!-- Confirm + Cancel inside modal -->
      <button id="confirmWarpBtn" class="btn btn-success w-100">Initiate Warp Sequence</button>
      <button id="cancelWarpBtn" class="btn btn-danger w-100" onclick="cancelWarp()">Cancel Warp</button>

    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>

  <script src="./js/config.js" defer></script>
  <script src="./js/market.js" defer></script>
  <script src="./js/npc.js" defer></script>
  <script src="./js/state.js" defer></script>
  <script src="./js/travel.js" defer></script>

  <script src="./js/utils.js" defer></script>
  <script src="./js/trade_contracts.js" defer></script>
  <script src="./js/ui.js" defer></script>
  <script src="./js/core.js" defer></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const warpModal     = document.getElementById('warpModal');
      const travelButton  = document.getElementById('travelButton');
      const confirmBtn    = document.getElementById('confirmWarpBtn');
      const cancelBtn     = document.getElementById('cancelWarpBtn');
      const abortBtn      = document.getElementById('abortWarpBtn');

      // 1) Travel â†’ calculate route & show modal
      travelButton.addEventListener('click', () => {
        travel();                   // fills in path/fuel into the modal
        warpModal.style.display = 'block';
      });

      // 2) Confirm â†’ hide modal & start warp
      confirmBtn.addEventListener('click', () => {
        warpModal.style.display = 'none';
        confirmWarp();
      });

      // 3) Cancel â†’ hide modal, donâ€™t warp
      cancelBtn.addEventListener('click', () => {
        warpModal.style.display = 'none';
        cancelWarp();
      });

      // 4) Abort (midâ€‘warp) â†’ fires your abort logic
      abortBtn.addEventListener('click', () => {
        abortWarp();
      });
    });
  </script>

  <link rel="shortcut icon" href="images/Fav.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/Fav.png">


  <!--<div> Icons made by <a href="https://www.flaticon.com/authors/artifex" title="Artifex"> Artifex 
  </a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com'</a></div>-->


</body>

</html>
